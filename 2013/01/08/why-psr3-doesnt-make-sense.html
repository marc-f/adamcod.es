<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    
        <title>Why PSR-3 Doesn't Make Sense and Why I'm Excited About It. - adamcod.es</title>
    

    

    <meta name="author" content="Adam Brett">

    <!-- style -->
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen, projection">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/adamcodes/">

    <!-- fonts -->
    <link href="http://fonts.googleapis.com/css?family=Cardo|Open+Sans:300,400" rel="stylesheet" type="text/css">

    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
    <section class="layout-meta">
        <header>
            <p class="author vcard">
                <strong><a href="http://adamcod.es" rel="author">adamcod.es</a></strong><br />
                by <a href="http://adambrett.co.uk">Adam Brett</a>
            </p>
        </header>

        <nav>
            <ul>
                <!--li><a href="http://adambrett.co.uk/about">About</a></li-->
                <li><a href="/archive.html"><i class="icon-book"></i> Archive</a></li>
                <li><a href="http://feeds.feedburner.com/adamcodes/"><i class="icon-rss"></i> Subscribe</a></li>
                <li><a href="http://twitter.com/sixdaysad/"><i class="icon-twitter"></i> Contact</a></li>
            </ul>
        </nav>
    </section>

    <section class="layout-main">
        <article>
    <div class="instapaper_ignore entry-unrelated">

    <h1 class="entry-title"><a href="http://adamcod.es/2013/01/08/why-psr3-doesnt-make-sense.html">Why PSR-3 Doesn't Make Sense and Why I'm Excited About It.</a></h1>
    <p class="meta"><time pubdate class="published" datetime="2013-01-08">Tuesday, January 08, 2013</time></p>
    <div class="twitter-button"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://adamcod.es/2013/01/08/why-psr3-doesnt-make-sense.html" data-text="Why PSR-3 Doesn't Make Sense and Why I'm Excited About It. by @sixdaysad">Tweet</a></div>

    


    </div>

    <div class="entry-content">
        <p>PSR-3<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> doesn’t make sense because people aren’t writing the right kind of PHP yet.  By this I mean that people aren’t writing the kind of PHP that would benefit from having a standard logging interface across multiple frameworks and libraries.</p>

<p>Most people are still writing Symfony PHP, or CakePHP, or CodeIgniter, or Zend or… you get the picture.  Why would it matter if they have a logger that they can use across all of the libraries and frameworks.  They only use the one.</p>

<p>Some people use a slightly more modern approach, they use one of the more up-to-date frameworks with PSR-0 and composer support.  To them, it makes more sense.  If they’re using a library from packagist, wouldn’t it be great if you could tell (Symfony|Zend|Laravel) to use the same logger as all of your libraries when it was writing its logs, then you’d only need <em>one</em> logger instance for all your apps, and it would write all your logs to the one place.  Great.</p>

<p>I think this is likely where the original proposal came from, and that <em>is</em> great, but I still think it misses the point.</p>

<p>Imagine, if you would, the following application:</p>

<pre><code>.
├── dist
│   ├── rest &lt;-- SlimPHP
│   │   ├── README.md
│   │   ├── composer.json
│   │   ├── composer.lock
│   │   ├── logs
│   │   ├── public
│   │   ├── templates
│   │   └── vendor
│   └── web &lt;-- CakePHP
│       ├── README.md
│       ├── app
│       ├── build.properties
│       ├── build.xml
│       ├── index.php
│       ├── lib
│       ├── plugins
│       └── vendors
├── logs
├── src &lt;-- My Application Code
│   └── AdamBrett
│       └── Application
│           ├── Entities
│           ├── StorageAdapters
│           └── UseCases
├── tests
└── vendor &lt;-- My 3rd Party Libraries
    └── Psr
        └── Log
</code></pre>

<p>Now this is the beginnings of a modern PHP application.  The source of the application, the bulk of the logic and entities are stored in the <code>src</code> directory.  The REST API is delivered by the micro-framework SlimPHP, and the web application is delivered by CakePHP.</p>

<p>They both have very little controller logic.  A controller action would basically setup a <code>StorageAdapter</code> (imagine <code>CakeStorage</code> and <code>IdiormStorage</code> objects both implementing <code>StorageInterface</code>), and pass it along to the relevant use-case - potentially with any relevant entity object - to perform the action required.  No repetition of code, a highly testable modern application.</p>

<p>Then you look at the logging situation.  Slim is logging to <code>./dist/rest/logs</code>, Cake is logging to <code>./dist/web/app/tmp/logs</code>, and your use-cases use monolog<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup> to log to somewhere else.  Yuk.</p>

<p>The guys in camp 2, who kind of gets PSR-3, are now thinking: Wouldn’t it be great if we could just use monolog throughout to log to <code>./logs</code>?  That’s what PSR-3 is for.</p>

<p>No! <em>No cookies for you</em>.</p>

<p>I don’t want to sift through my logs and find entries from Slim, Cake, and my own code.  If one of my users has an issue with the API why would I care about Cake’s logs when Cake only handles my web requests?</p>

<p>For that matter - why would I care about the logs my use-cases produce when called from Cake?  I don’t.  At all.  What I want, what I <em>really</em> really want, is to say: Hey, I have a problem with the REST API, let’s check through the SlimPHP logs <em>and</em> see the logs from any use cases it calls.  All in one place.  Together.  In date order.  As it happened.</p>

<p>For me, <em>that’s</em> what’s exciting about PSR-3.  I don’t want all my logs in one place.  I want to see my use-cases in Cake’s logs when I’m debugging my web app, and I want to see my use-cases in Slim’s logs when I’m debugging my REST API.</p>

<p>Once SlimPHP and CakePHP support the PSR-3 logger standard internally, I want to pass <em>their</em> loggers to <em>my</em> use-cases and get the output <em>I</em> want in the format <em>I</em> want - in the location I expect it - with a high signal-to-noise ratio.</p>

<p>The PSR-3 LoggerInterface has the potential to give me that.  And I think that’s pretty exciting.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-3-logger-interface.md<a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>https://github.com/Seldaek/monolog<a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

    </div>
</article>


<hr>

<ul class="pager" />
    
    <li class="previous">
        <a href="/2012/08/10/introducing-tweetest-php-test-framework.html">&larr; Previous</a>
    </li>
    

    
    <li class="next">
        <a href="/2013/01/15/vagrant-is-easy-chef-is-hard.html">Next &rarr;</a>
    </li>
    
</ul>


        <footer>
            <p>Copyright &copy; 2012 <a href="http://adambrett.co.uk">Adam Brett</a>.  All rights reserved.</p>
        </footer>
    </section>

    <script type="text/javascript" src="http://platform.twitter.com/widgets.js?ver=1.1"></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-10572636-6']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</body>
</html>
