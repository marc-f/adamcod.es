<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    
        <title>Class 'String' not found in app/Model/User.php on line xx - adamcod.es</title>
    

    

    <meta name="author" content="Adam Brett">

    <!-- style -->
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen, projection">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" href="http://feeds.feedburner.com/adamcodes/">

    <!-- fonts -->
    <link href="http://fonts.googleapis.com/css?family=Cardo|Open+Sans" rel="stylesheet" type="text/css">

    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
    <section class="layout-meta">
        <header>
            <p class="author vcard">
                <strong><a href="http://adamcod.es" rel="author">adamcod.es</a></strong><br />
                by <a href="http://adambrett.co.uk">Adam Brett</a>
            </p>
        </header>

        <nav>
            <ul>
                <!--li><a href="http://adambrett.co.uk/about">About</a></li-->
                <li><a href="/archive.html"><i class="icon-book"></i> Archive</a></li>
                <li><a href="http://feeds.feedburner.com/adamcodes/"><i class="icon-rss"></i> Subscribe</a></li>
                <li><a href="http://twitter.com/sixdaysad/"><i class="icon-twitter"></i> Contact</a></li>
            </ul>
        </nav>
    </section>

    <section class="layout-main">
        <article>
    <div class="instapaper_ignore entry-unrelated">

    <h1 class="entry-title"><a href="http://adamcod.es/2012/07/17/cakephp-class-string-not-found.html">Class 'String' not found in app/Model/User.php on line xx</a></h1>
    <p class="meta"><time pubdate class="published" datetime="2012-07-17">Tuesday, July 17, 2012</time></p>
    <div class="twitter-button"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://adamcod.es/2012/07/17/cakephp-class-string-not-found.html" data-text="Class 'String' not found in app/Model/User.php on line xx by @sixdaysad">Tweet</a></div>


    </div>

    <div class="entry-content">
        <p>This is a really easy to fix error that occurs in a very specific situation.  Namely when developing an application in CakePHP that makes use of the ACL behavior whilst also having a <code>beforeSave</code> method on the User model.  It can be pretty frustrating at first because there’s nothing about it on the Internet, and as far as you can tell, there isn’t an error on line xx, and you’re not using the String object anywhere.</p>

<p>It’s happening because of a missing options array on the <code>beforeSave</code> method you added to the User model.  Simply change:</p>

<p><code>public function beforeSave() {</code></p>

<p>to</p>

<p><code>function beforeSave($options = array()) {</code></p>

<p>and make sure that you call <code>parent::beforeSave($options)</code> somewhere in your method definition.</p>

    </div>
</article>


<hr>

<ul class="pager" />
    
    <li class="previous">
        <a href="/2012/07/13/unchangable-public-variables-in-php.html">&larr; Previous</a>
    </li>
    

    
    <li class="next">
        <a href="/2012/07/25/imagine-php-image-library.html">Next &rarr;</a>
    </li>
    
</ul>


        <footer>
            <p>Copyright &copy; 2012 <a href="http://adambrett.co.uk">Adam Brett</a>.  All rights reserved.</p>
        </footer>
    </section>

    <script type="text/javascript" src="http://platform.twitter.com/widgets.js?ver=1.1"></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-10572636-6']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</body>
</html>
